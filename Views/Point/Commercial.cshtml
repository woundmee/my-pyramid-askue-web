@model MyPyramidWeb.Models.Views.CommercialView



@{
    // Layout = null;
    // var points = ViewBag.pointData as IEnumerable<string>;
    // var orgs = ViewBag.orgs as Array;
}


<p class="mb-5"><a href="/" class="text-decoration-none btn border-secondary link-secondary">← Главное меню</a></p>

<div class="container mb-5" style="width: 30rem">

    <form method="post" asp-controller="Point" asp-action="CommercialPost">

        @if (Model.Orgs.Length > 0 || Model.Orgs.Any())
        {
            <div class="input-group flex-nowrap">
                <span class="input-group-text w-25 bg-dark border-secondary text-secondary mb-3">ORG</span>
                <select class="form-select w-75 bg-dark border-secondary text-light mb-3" role="button"
                        name="selectOrgName">
                    <option selected value="ALL">ALL</option>
                    @foreach (var org in Model.Orgs)
                    {
                        <option name="orgNameOption" value=@org>@org</option>
                    }
                </select>
            </div>
        }

        <div class="input-group flex-nowrap mb-4">
            <span class="input-group-text w-25 border-secondary text-secondary bg-dark">TU</span>
            <input class="form-control bg-dark border-secondary text-light w-75" name="tuNumber" type="text"
                   placeholder="Пример: 66(1), 75"
                   pattern="[^A-Za-zА-Яа-яЁё]{1,}"  title="Разрешены только цифры, пробелы, запятые и круглые скобки." required />
        </div>

        <div class="form-check-label mb-4">
            <input class="form-check-input mt-1 p-2 me-1" style="cursor: pointer" type="checkbox" value="" id="checkDefault">
            <label class="form-check-label" style="cursor: pointer" for="checkDefault">
                Секретные данные
            </label>
        </div>

        <button class="btn btn-primary w-100" type="submit">Получить</button>
    </form>

</div>

<div class="container w-100">
@if (Model.PointData.Count > 0 || Model.PointData.Any())
{
    <table class="table table-striped table-dark table-bordered border-secondary text-light">
        <thead>
        <tr>
            <th class="text-secondary" scope="col">ТУ</th>
            <th class="text-secondary" scope="col" colspan="4">Основной канал</th>
            <th class="text-secondary" scope="col" colspan="4">Резервный канал</th>
        </tr>
        </thead>
        @foreach (var point in Model.PointData)
        {
            var mainDeviceName = point.CellMainDeviceName.Split(",");
            var mainDeviceIp = point.CellMainDeviceIp.Split(",");
            var reserveDeviceName = point.CellReserveDeviceName.Split(",");
            var reserveDeviceIp = point.CellReserveDeviceIp.Split(",");
            // var pointSplit = point.Split(",");
            <tr>
                <td>@point.CellNamePoint</td>
                <td>@Html.Raw(mainDeviceName.Length > 0 ? mainDeviceName[0] : "N/A")</td>
                <td>@Html.Raw(mainDeviceName.Length > 1 ? mainDeviceName[1] : "-")</td>
                <td>@Html.Raw(mainDeviceIp.Length > 0 ? mainDeviceIp[0] : "-")</td>
                <td>@Html.Raw(mainDeviceIp.Length > 1 ? mainDeviceIp[1] : "-")</td>
                <td>@Html.Raw(reserveDeviceName.Length > 0 ? reserveDeviceName[0] : "-")</td>
                <td>@Html.Raw(reserveDeviceName.Length > 1 ? reserveDeviceName[1] : "-")</td>
                <td>@Html.Raw(reserveDeviceIp.Length > 0 ? reserveDeviceIp[0] : "-")</td>
                <td>@Html.Raw(reserveDeviceIp.Length > 1 ? reserveDeviceIp[1] : "-")</td>

                @* <td class="text-light">@Html.Raw(pointSplit.Length > 8 ? pointSplit[8].Trim() : "")</td> *@

            </tr>

            <p class="text-danger">@point.Message</p>
        }

    </table>
}
else
{
    <p class="text-secondary text-center">Предприятие и ТУ не выбраны</p>
}

</div>








@* =============================================== *@


@{
    // Layout = null;
    // var points = ViewBag.pointData as IEnumerable<string>;
    // var orgs = ViewBag.orgs as Array;
}



@* *@
@* @{ *@
@*     // Layout = null; *@
@*     var points = ViewBag.pointData as IEnumerable<string>; *@
@*     var orgs = ViewBag.orgs as Array; *@
@* } *@
@* *@
@* <p class="mb-5"><a href="/" class="text-decoration-none btn border-secondary link-secondary">← Главное меню</a></p> *@
@* *@
@* *@
@* <form method="post" asp-controller="Point" asp-action="CommercialPost"> *@
@* *@
@*     @if (Model.Orgs.Length != 0) *@
@*     { *@
@*         <div class="input-group flex-nowrap"> *@
@*             <span class="input-group-text w-25 bg-dark border-secondary text-secondary mb-3">ORG</span> *@
@*             <select class="form-select w-75 bg-dark border-secondary text-light mb-3" name="selectOrgName"> *@
@*                 <option selected value="ALL">ALL</option> *@
@*                 @foreach (var org in Model.Orgs) *@
@*                 { *@
@*                     <option name="orgNameOption" value=@org>@org</option> *@
@*                 } *@
@*             </select> *@
@*         </div> *@
@*     } *@
@* *@
@*     <div class="input-group flex-nowrap mb-4"> *@
@*         <span class="input-group-text w-25 border-secondary text-secondary bg-dark">TU</span> *@
@*         <input class="form-control bg-dark border-secondary text-light w-75" name="tuNumber" type="text" placeholder="Пример: 75, 141, 98"/> *@
@*     </div> *@
@* *@
@*     <button class="btn btn-primary w-100" type="submit">Получить</button> *@
@* </form> *@
@* *@
@* <br> *@
@* *@
@* @if (points != null) //  && points.Any() *@
@* { *@
@*     <table class="table table-striped table-dark table-bordered border-secondary text-light"> *@
@*         <thead> *@
@*         <tr> *@
@*             <th class="text-secondary" scope="col">ТУ</th> *@
@*             <th class="text-secondary" scope="col" colspan="4">Основной канал</th> *@
@*             <th class="text-secondary" scope="col" colspan="4">Резервный канал</th> *@
@*         </tr> *@
@*         </thead> *@
@*         @foreach (var point in points) *@
@*         { *@
@*             var pointSplit = point.Split(","); *@
@*             <tr> *@
@*                 <td class="text-light">@Html.Raw(pointSplit.Length > 0 ? pointSplit[0].Trim() : "")</td> *@
@*                 <td class="text-light">@Html.Raw(pointSplit.Length > 1 ? pointSplit[1].Trim() : "")</td> *@
@*                 <td class="text-light">@Html.Raw(pointSplit.Length > 2 ? pointSplit[2].Trim() : "")</td> *@
@*                 <td class="text-light">@Html.Raw(pointSplit.Length > 3 ? pointSplit[3].Trim() : "")</td> *@
@*                 <td class="text-light">@Html.Raw(pointSplit.Length > 4 ? pointSplit[4].Trim() : "")</td> *@
@*                 <td class="text-light">@Html.Raw(pointSplit.Length > 5 ? pointSplit[5].Trim() : "")</td> *@
@*                 <td class="text-light">@Html.Raw(pointSplit.Length > 6 ? pointSplit[6].Trim() : "")</td> *@
@*                 <td class="text-light">@Html.Raw(pointSplit.Length > 7 ? pointSplit[7].Trim() : "")</td> *@
@*                 <td class="text-light">@Html.Raw(pointSplit.Length > 8 ? pointSplit[8].Trim() : "")</td> *@
@* *@
@*             </tr> *@
@*         } *@
@* *@
@*     </table> *@
@* } *@
@* else *@
@* { *@
@*     <p class="text-secondary">Предприятие и ТУ не выбраны.</p> *@
@* } *@
